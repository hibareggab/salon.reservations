<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<script>
  // Si l'utilisateur n'est pas connectรฉ (sessionStorage), redirige vers login.html
  (function () {
    // autoriser l'accรจs direct si on est dรฉjร sur login.html
    const isLoginPage = location.pathname.endsWith('login.html') || location.pathname === '/';
    if (!sessionStorage.getItem('salon_logged_in') && !isLoginPage) {
      location.replace('login.html');
    }
  })();
</script>

<title>๐ธ ุตุงููู ุฒูุฑุฉ ุฃูููู ๐ธ</title>
<link rel="stylesheet" href="styles.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<script src="scripts.js" defer></script>
</head>
<body>

<h1>ุตุงููู ุฒูุฑุฉ ุฃูููู</h1>
<button id="logoutBtn" style="position:fixed;top:10px;left:10px;">ุชุณุฌูู ุงูุฎุฑูุฌ</button>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('logoutBtn');
    if (btn) {
      btn.addEventListener('click', () => {
        sessionStorage.removeItem('salon_logged_in');
        location.replace('login.html');
      });
    }
  });
</script>

<button onclick="toggleForm()">ุณุฌูู ุญุฌุฒ</button>
<button onclick="toggleReservations()">ุงูุญุฌูุฒุงุช</button>
<button onclick="toggleConfirmedServices()">ุงูุฎุฏูุงุช ุงููุคูุฏุฉ</button>
<button onclick="toggleSpecialists()">ุฌุฏูู ุงูุฃุฎุตุงุฆูุงุช</button>
<button onclick="toggleBeautyBlenders()">ุฅุญุตุงุฆูุงุช ุงูุจููุชู ุจูููุฏุฑ</button>

<div id="reservationForm" class="hidden">
    <h2>ุณุฌู ุงูุญุฌุฒ</h2>
    <div id="servicesContainer">
        <div class="service-group">
            <label>ุงูุฎุฏูุฉ : </label><input type="text" class="serviceName">
            <label>ุณุนุฑ ุงูุฎุฏูุฉ : </label><input type="number" class="servicePrice">
        </div>
    </div>
    <button onclick="addService()">ุฅุถุงูุฉ ุฎุฏูุฉ ุฃุฎุฑู</button><br>
    <label>ูุชุงุฑูุฎ : </label><input type="date" id="date"><br>
    <label>ุงูุณุงุนุฉ : </label><input type="time" id="time"><br>
    <label>ุงูุนุฑุจูู : </label><input type="number" id="deposit"><br>
    <label>ุจููุชู ุจูููุฏุฑ ูฅ ุฑูุงู ุณุนูุฏู : </label><input type="checkbox" id="bbCheck"><br>
    <label>ููุงุญุธุงุช : </label><input type="text" id="notes"><br><br>
    <button onclick="saveReservationSupabase()">ุญูุธ ุงูุญุฌุฒ</button>
</div>

<div id="reservationTableDiv" class="hidden">
    <h2>ุงูุญุฌูุฒุงุช</h2>
    <div id="reservationMonthTables"></div>
</div>

<div id="confirmedServicesDiv" class="hidden">
    <h2>ุงูุฎุฏูุงุช ุงููุคูุฏุฉ</h2>
    <div id="confirmedMonthTables"></div>
</div>

<div id="specialistsDiv" class="hidden">
    <h2>ุฌุฏูู ุงูุฃุฎุตุงุฆูุงุช</h2>
    <button onclick="addSpecialist()">โ ุฅุถุงูุฉ ุฃุฎุตุงุฆูุฉ</button>
    <div id="specialistTables"></div>
</div>

<div id="bbStatsDiv" class="hidden">
    <h2>ุฅุญุตุงุฆูุงุช ุงูุจููุชู ุจูููุฏุฑ</h2>
    <div id="bbMonthTables"></div>
</div>

</body>
</html>
